---
- name: download docker-machine zip
  get_url: url={{dockermachine_zip_url}} dest=/tmp/{{dockermachine_zip}}

- name: create /opt/docker-machine/vXXXX
  file: >
    owner=root
    group=root
    mode=0755
    path={{dockermachine_install_dir}}
    state=directory
  
- name: unachive docker-machine
  unarchive: copy=no src='/tmp/{{dockermachine_zip}}' dest='{{dockermachine_install_dir}}'

- name: link /opt/docker-machine
  file: src='{{dockermachine_install_dir}}' dest='/opt/docker-machine' state=link

- name: add docker-machine to the path
  copy: >
    src=etc/profile.d/docker-machine.sh
    dest=/etc/profile.d/docker-machine.sh
    mode=644
